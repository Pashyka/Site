<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Уральские пельмешки — пельмени ручной лепки с доставкой по Москве</title>
  <meta name="description" content="Уральские пельмешки — пельмени ручной лепки, вареники, манты и домашние полуфабрикаты. Доставка по Москве и области." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Prata&family=Onest:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #f8f1ea;
      --bg-deep: #f0e6dd;
      --ink: #2b1f1a;
      --muted: #7a6b63;
      --accent: #c8572d;
      --accent-2: #e07a52;
      --accent-3: #a64624;
      --card: #ffffff;
      --shadow: 0 20px 50px rgba(38, 28, 24, 0.12);
      --radius-lg: 28px;
      --radius-md: 18px;
      --radius-sm: 12px;
      --grid-gap: 20px;
      --ui-ease: cubic-bezier(0.22, 1, 0.36, 1);
      --ui-shadow-soft: 0 10px 24px rgba(32, 22, 18, 0.12);
      --ui-shadow-strong: 0 16px 34px rgba(32, 22, 18, 0.18);
      --ui-ring: 0 0 0 3px rgba(200, 87, 45, 0.22);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }

    html.no-smooth-scroll {
      scroll-behavior: auto !important;
    }

    body {
      font-family: "Onest", "Prata", serif;
      color: var(--ink);
      background:
        radial-gradient(980px 560px at -6% -4%, rgba(255, 255, 255, 0.78) 0%, rgba(255, 255, 255, 0) 68%),
        radial-gradient(860px 540px at 104% 12%, rgba(219, 129, 88, 0.22) 0%, rgba(219, 129, 88, 0) 68%),
        linear-gradient(165deg, #f8efe5 0%, #f3e6d8 52%, #ebd6c4 100%);
      line-height: 1.6;
      overflow-x: clip;
    }

    body.cart-open {
      position: fixed;
      left: 0;
      right: 0;
      width: 100%;
      overflow: hidden;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .page {
      overflow: hidden;
    }

    .container {
      width: min(1160px, 92vw);
      margin: 0 auto;
    }

    .eyebrow {
      font-size: 12px;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 14px 24px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-weight: 600;
      transition:
        transform 0.28s var(--ui-ease),
        box-shadow 0.28s var(--ui-ease),
        background-color 0.22s var(--ui-ease),
        border-color 0.22s var(--ui-ease),
        color 0.22s var(--ui-ease);
      cursor: pointer;
    }

    .btn-primary {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 16px 30px rgba(229, 75, 75, 0.32);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 30px rgba(229, 75, 75, 0.32);
    }

    .btn-ghost {
      border-color: rgba(43, 31, 26, 0.18);
      color: var(--ink);
      background: rgba(255, 255, 255, 0.7);
    }

    .btn-ghost:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(229, 75, 75, 0.08);
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(28, 23, 20, 0.12);
    }

    .hero-cta {
      background: rgba(255, 255, 255, 0.7);
      border-color: rgba(43, 31, 26, 0.18);
      color: var(--ink);
      box-shadow: none;
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease, color 0.18s ease, border-color 0.18s ease;
    }

    .hero-cta:hover {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
      box-shadow: 0 16px 30px rgba(229, 75, 75, 0.28);
      transform: translateY(-2px);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      background: #fff;
      border: 1px solid rgba(28, 23, 20, 0.08);
      font-size: 14px;
      color: var(--muted);
    }

    .tag {
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(229, 75, 75, 0.1);
      color: var(--accent);
      font-weight: 600;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: rgba(248, 243, 238, 0.8);
      border-bottom: 1px solid rgba(28, 23, 20, 0.08);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 0;
      gap: 20px;
    }

    .logo {
      font-family: "Prata", serif;
      font-size: 22px;
      letter-spacing: 0.02em;
    }

    .logo img {
      height: 46px;
      width: auto;
      display: block;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 20px;
      font-weight: 500;
    }

    .nav-links a {
      position: relative;
      transition: color 0.22s var(--ui-ease);
    }

    .nav-links a::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: -5px;
      height: 2px;
      border-radius: 999px;
      background: var(--accent);
      transform: scaleX(0);
      transform-origin: center;
      transition: transform 0.26s var(--ui-ease);
    }

    .nav-cta {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .nav-cta .pill {
      white-space: nowrap;
    }

    .nav-cta .btn,
    .nav-cta .pill {
      flex-shrink: 0;
    }

    .hero {
      padding: 72px 0 96px;
      position: relative;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 48px;
      align-items: center;
    }

    .hero h1 {
      font-family: "Prata", serif;
      font-size: clamp(36px, 4vw, 56px);
      line-height: 1.1;
      margin: 16px 0 18px;
    }

    .hero p {
      color: var(--muted);
      font-size: 18px;
    }

    .hero-actions {
      margin-top: 26px;
      margin-bottom: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }

    .hero-card {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 26px;
      box-shadow: var(--shadow);
      display: grid;
      gap: 18px;
    }

    .hero-card .stat {
      display: flex;
      align-items: baseline;
      gap: 6px;
    }

    .hero-card .stat strong {
      font-size: 28px;
      color: var(--accent);
      line-height: 1.1;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .hero-card .stat span {
      min-width: 0;
    }

    .hero-visual {
      position: relative;
      min-height: 342px;
      border-radius: 0;
      background: transparent;
      overflow: visible;
      color: #fff;
      padding: 0;
      display: grid;
      place-items: center;
    }

    .hero-visual::before {
      display: none;
    }

    .hero-showcase {
      position: relative;
      z-index: 2;
      width: min(100%, 470px);
      height: 342px;
      border-radius: 24px;
      overflow: hidden;
      background: #f5e4d5;
      border: none;
      box-shadow: 0 18px 34px rgba(74, 24, 16, 0.2);
      transform: translateZ(0);
    }

    .hero-showcase-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: 50% 48%;
      display: block;
      transition: opacity 0.42s cubic-bezier(0.22, 1, 0.36, 1), transform 0.9s cubic-bezier(0.22, 1, 0.36, 1);
      transform: scale(1.02);
    }

    .hero-showcase-image.is-fading {
      opacity: 0.28;
      transform: scale(1.05);
    }

    .hero-showcase-caption {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      display: grid;
      gap: 4px;
      padding: 13px 14px;
      background: linear-gradient(180deg, rgba(28, 14, 10, 0) 0%, rgba(28, 14, 10, 0.76) 58%, rgba(28, 14, 10, 0.88) 100%);
      transition: opacity 0.36s cubic-bezier(0.22, 1, 0.36, 1), transform 0.36s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .hero-showcase-caption.is-updating {
      opacity: 0.35;
      transform: translateY(6px);
    }

    .hero-showcase-kind {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255, 236, 220, 0.9);
    }

    .hero-showcase-name {
      font-size: 20px;
      line-height: 1.22;
      font-weight: 600;
      color: rgba(255, 248, 241, 0.99);
      text-shadow: 0 1px 1px rgba(30, 14, 10, 0.35);
    }

    .hero-showcase-price {
      font-size: 13px;
      color: rgba(255, 236, 220, 0.9);
    }

    .hero-showcase-note {
      font-size: 12px;
      color: rgba(255, 231, 214, 0.86);
    }

    .section {
      padding: 80px 0;
    }

    .section-title {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 24px;
    }

    .section-title .eyebrow {
      margin-bottom: 8px;
    }

    .btn-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(28, 23, 20, 0.12);
      background: rgba(255, 255, 255, 0.8);
      color: var(--ink);
      font-weight: 600;
      font-size: 14px;
      transition:
        transform 0.28s var(--ui-ease),
        box-shadow 0.28s var(--ui-ease),
        background-color 0.22s var(--ui-ease),
        color 0.22s var(--ui-ease),
        border-color 0.22s var(--ui-ease);
    }

    .btn-link:hover {
      transform: translateY(-1px);
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 8px 18px rgba(28, 23, 20, 0.12);
    }

    .section-title h2 {
      font-family: "Prata", serif;
      font-size: clamp(28px, 3.2vw, 40px);
      margin: 0;
      line-height: 1.1;
    }

    .grid {
      display: grid;
      gap: var(--grid-gap);
    }

    .grid-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .grid-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-md);
      padding: 22px;
      box-shadow: 0 12px 30px rgba(28, 23, 20, 0.08);
      display: grid;
      gap: 14px;
      min-height: 100%;
    }

    .card h3 {
      font-size: 20px;
    }

    .catalog-card {
      position: relative;
      overflow: hidden;
      padding: 26px;
    }

    .catalog-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.9), rgba(248, 243, 238, 0.6));
      z-index: 0;
    }

    .catalog-card > * {
      position: relative;
      z-index: 1;
    }

    .catalog-card {
      cursor: pointer;
      transition:
        transform 0.32s var(--ui-ease),
        box-shadow 0.32s var(--ui-ease),
        border-color 0.26s var(--ui-ease);
      border: 1px solid rgba(28, 23, 20, 0.08);
      padding: 22px;
      gap: 16px;
    }

    .catalog-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 34px rgba(28, 23, 20, 0.14);
      border-color: rgba(229, 75, 75, 0.22);
    }

    .catalog-card .thumb {
      height: 200px;
      border-radius: 18px;
      background: #f5e4d5 center/cover no-repeat;
      box-shadow: 0 10px 22px rgba(28, 23, 20, 0.12);
    }

    .catalog-card h3 {
      font-size: 20px;
      margin-top: 4px;
    }

    .catalog-card p {
      color: var(--muted);
      font-size: 15px;
    }

    .catalog-card p {
      color: var(--muted);
    }

    .highlights {
      background: transparent;
      border-radius: 0;
      padding: 0;
      display: grid;
      gap: 18px;
    }

    #advantages .section-title {
      margin-bottom: 16px;
      align-items: flex-start;
    }

    #advantages .highlights {
      padding: 0;
      gap: 12px;
    }

    .highlights .item {
      display: flex;
      gap: 14px;
      align-items: flex-start;
    }

    .highlights .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--accent-2);
      margin-top: 6px;
    }

    .product {
      display: grid;
      gap: 6px;
      border-radius: var(--radius-md);
      background: #fff;
      padding: 18px;
      border: 1px solid rgba(28, 23, 20, 0.08);
      box-shadow: 0 10px 24px rgba(28, 23, 20, 0.08);
      transition:
        transform 0.32s var(--ui-ease),
        box-shadow 0.32s var(--ui-ease),
        border-color 0.24s var(--ui-ease);
    }

    .product .thumb {
      border-radius: 16px;
      height: 180px;
      background: #f5e4d5 center/cover no-repeat;
      display: grid;
      place-items: center;
      font-family: "Prata", serif;
      font-size: 20px;
      color: rgba(28, 23, 20, 0.55);
      text-align: center;
      padding: 16px;
      overflow: hidden;
      position: relative;
      isolation: isolate;
    }

    .product .thumb-track {
      position: absolute;
      inset: 0;
    }

    .product .thumb-slide {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: 50% 48%;
      opacity: 0;
      transform: scale(1.02);
      transition: opacity 320ms ease, transform 420ms ease;
      pointer-events: none;
      user-select: none;
      -webkit-user-drag: none;
    }

    .product .thumb-slide.active {
      opacity: 1;
      transform: scale(1);
    }

    .product .thumb-dots {
      position: absolute;
      left: 10px;
      right: 10px;
      bottom: 10px;
      display: grid;
      grid-auto-flow: column;
      gap: 6px;
      z-index: 2;
    }

    .product .thumb-dot {
      height: 3px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.5);
      border: none;
      padding: 0;
      cursor: pointer;
      transition: background 180ms ease;
    }

    .product .thumb-dot.active {
      background: rgba(255, 255, 255, 0.92);
    }

    .product .thumb-overlay {
      position: absolute;
      inset: auto 0 0;
      height: 44px;
      background: linear-gradient(180deg, transparent 0%, rgba(15, 10, 8, 0.22) 100%);
      z-index: 1;
      pointer-events: none;
      display: none;
    }

    .product .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 14px;
      color: var(--muted);
    }

    .product .price {
      font-weight: 700;
      font-size: 18px;
      color: var(--accent);
    }


    .cart-button {
      position: relative;
    }

    .cart-float {
      position: fixed;
      top: 18px;
      right: 18px;
      z-index: 80;
      box-shadow: 0 12px 24px rgba(28, 23, 20, 0.18);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease, transform 0.2s ease;
      transform: translateY(-6px);
    }

    .cart-float.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .cart-float {
      padding: 10px 14px;
      gap: 8px;
      font-size: 13px;
      height: 40px;
      align-items: center;
    }

    .float-btn {
      padding: 10px 14px;
      gap: 8px;
      font-size: 13px;
      height: 40px;
      align-items: center;
      box-shadow: 0 12px 24px rgba(28, 23, 20, 0.18);
      border: 2px solid rgba(200, 87, 45, 0.45);
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transition:
        background-color 0.24s var(--ui-ease),
        border-color 0.24s var(--ui-ease),
        box-shadow 0.3s var(--ui-ease),
        color 0.24s var(--ui-ease),
        transform 0.3s var(--ui-ease);
    }

    .float-btn:hover,
    .float-btn:focus-visible {
      background: rgba(255, 255, 255, 0.96);
      border-color: var(--accent);
      box-shadow: 0 14px 28px rgba(28, 23, 20, 0.2);
      color: var(--accent);
      transform: translateY(-1px);
    }

    .cart-float .cart-label {
      display: none;
    }

    .cart-icon {
      width: 20px;
      height: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .cart-icon svg {
      width: 20px;
      height: 20px;
    }

    .cart-badge {
      margin-left: 6px;
    }

    .cart-float .cart-label {
      display: none;
    }

    .cart-float.compact .cart-badge {
      display: none;
    }

    .cart-float.compact .cart-icon {
      display: inline-block;
    }

    .cart-float.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .catalog-float {
      position: fixed;
      top: 18px;
      right: 120px;
      z-index: 85;
      display: inline-flex;
      align-items: center;
      padding: 0;
      background: transparent;
      border: none;
      width: auto;
      height: auto;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-6px);
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .catalog-float.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .catalog-float.hidden {
      opacity: 0;
      pointer-events: none;
      transform: translateY(-6px);
    }

    .catalog-float > .btn {
      padding: 10px 14px;
      height: 40px;
      align-items: center;
    }

    .catalog-float-menu {
      position: absolute;
      top: 44px;
      right: 0;
      display: none;
      gap: 6px;
      padding: 10px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 12px 24px rgba(28, 23, 20, 0.12);
      opacity: 0;
      transform: translateY(-6px);
      pointer-events: none;
      transition: opacity 0.18s ease, transform 0.18s ease;
      min-width: 180px;
      visibility: hidden;
      padding-top: 14px;
    }

    .catalog-float.menu-open .catalog-float-menu {
      display: grid;
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
      visibility: visible;
    }

    .catalog-float.menu-closing .catalog-float-menu {
      display: none !important;
      opacity: 0 !important;
      transform: translateY(-6px) !important;
      pointer-events: none !important;
      visibility: hidden !important;
    }

    @media (hover: hover) and (pointer: fine) {
      .catalog-float:not(.menu-closing):hover .catalog-float-menu,
      .catalog-float:not(.menu-closing):focus-within .catalog-float-menu {
        display: grid;
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
        visibility: visible;
      }
    }

    .catalog-float::after {
      content: "";
      position: absolute;
      top: 38px;
      right: 0;
      width: 100%;
      height: 16px;
    }

    .cart-count {
      background: var(--accent);
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      border-radius: 999px;
      padding: 4px 8px;
    }
    .cart-count {
      background: var(--accent);
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      border-radius: 999px;
      padding: 4px 8px;
    }

    .cart-overlay {
      position: fixed;
      inset: 0;
      background: rgba(28, 23, 20, 0.45);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 60;
    }

    .cart-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }

    .cart-drawer {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 460px;
      height: 726px;
      background: var(--card);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transform: translateX(110%);
      transition: transform 0.25s ease;
      z-index: 70;
      display: grid;
      grid-template-rows: 73px 1fr auto;
    }

    .cart-drawer.open {
      transform: translateX(0);
    }

    .cart-header {
      position: relative;
      height: 73px;
      padding: 0 18px;
      display: flex;
      align-items: center;
    }

    .cart-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--ink);
      margin-left: 12px;
    }

    .cart-actions {
      position: absolute;
      right: 18px;
      top: 23px;
      display: inline-flex;
      gap: 12px;
      align-items: center;
    }

    .cart-clear {
      width: 98px;
      height: 37px;
      border-radius: 18.5px;
      border: none;
      background: var(--bg-deep);
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      color: var(--ink);
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    .cart-close {
      width: 37px;
      height: 37px;
      border-radius: 18.5px;
      border: none;
      background: var(--bg-deep);
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      color: var(--ink);
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    .cart-clear:hover,
    .cart-close:hover {
      background: #e9e0d8;
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(28, 23, 20, 0.12);
    }

    .cart-items {
      display: grid;
      gap: 14px;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      padding: 0;
      padding-left: 22px;
      padding-right: 22px;
      padding-top: 14px;
      justify-items: start;
      align-content: start;
    }

    .cart-item {
      width: 416px;
      min-height: 104px;
      display: grid;
      grid-template-columns: 70px 1fr 100px;
      grid-template-rows: auto auto;
      column-gap: 12px;
      align-items: center;
      padding: 12px 14px;
      border-radius: 16px;
      background: #fff;
      border: 1px solid rgba(28, 23, 20, 0.08);
      box-shadow: 0 10px 24px rgba(28, 23, 20, 0.08);
    }

    .cart-item img {
      width: 70px;
      height: 70px;
      border-radius: 15px;
      object-fit: cover;
      background: #d9d9d9;
      grid-row: 1 / span 2;
    }

    .cart-item-info {
      display: grid;
      gap: 4px;
      min-width: 0;
      grid-column: 2 / 3;
      grid-row: 1 / span 2;
    }

    .cart-item-name {
      font-weight: 600;
      font-size: 14px;
      white-space: normal;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      color: var(--ink);
      align-self: end;
    }

    .cart-item-sub {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--muted);
      font-size: 13px;
      font-weight: 600;
      align-self: start;
    }

    .product-qty {
      display: grid;
      grid-template-columns: 30px minmax(24px, auto) 30px;
      align-items: center;
      justify-items: center;
      gap: 4px;
      border: 1px solid rgba(200, 87, 45, 0.35);
      border-radius: 999px;
      background: #fff;
      color: var(--ink);
      font-weight: 600;
      box-shadow: 0 6px 14px rgba(28, 23, 20, 0.08);
    }

    .product-qty {
      height: 44px;
      padding: 4px;
      grid-template-columns: 34px minmax(28px, auto) 34px;
    }

    .product-qty.appear {
      animation: popIn 220ms ease;
    }

    .btn-primary.appear {
      animation: fadeInUp 180ms ease;
    }

    @keyframes popIn {
      0% { transform: scale(0.92); opacity: 0; }
      65% { transform: scale(1.04); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes fadeInUp {
      0% { transform: translateY(2px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }

    .product-qty button {
      width: 100%;
      height: 100%;
      border-radius: 999px;
      border: none;
      background: rgba(200, 87, 45, 0.12);
      cursor: pointer;
      font-weight: 700;
      color: var(--accent);
      line-height: 0;
      font-size: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      transition:
        transform 0.22s var(--ui-ease),
        background-color 0.22s var(--ui-ease),
        color 0.22s var(--ui-ease),
        box-shadow 0.22s var(--ui-ease);
    }

    .product-qty .qty-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .product-qty .qty-icon svg {
      width: 14px;
      height: 14px;
      display: block;
    }

    .product-qty button:hover {
      background: rgba(200, 87, 45, 0.2);
      transform: translateY(-1px);
    }

    .product-qty > span {
      min-width: 24px;
      text-align: center;
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .hero-actions {
      min-height: 44px;
      align-items: center;
    }

    .hero-actions .btn {
      height: 44px;
      align-items: center;
    }

    .cart-qty {
      display: grid;
      grid-template-columns: 26px 34px 26px;
      column-gap: 4px;
      align-items: center;
      justify-items: center;
      width: max-content;
      height: 34px;
      padding: 3px;
      border-radius: 999px;
      border: 1px solid rgba(229, 75, 75, 0.24);
      background: linear-gradient(180deg, #fff 0%, #fdf7f3 100%);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9);
    }

    .cart-qty button {
      width: 26px;
      height: 26px;
      border: none;
      border-radius: 999px;
      background: rgba(229, 75, 75, 0.12);
      color: var(--accent);
      cursor: pointer;
      font-weight: 700;
      font-size: 0;
      line-height: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition:
        transform 0.22s var(--ui-ease),
        background-color 0.22s var(--ui-ease),
        color 0.22s var(--ui-ease),
        box-shadow 0.22s var(--ui-ease);
    }

    .cart-qty .qty-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .cart-qty .qty-icon svg {
      width: 13px;
      height: 13px;
      display: block;
    }

    .cart-qty button:hover {
      background: rgba(229, 75, 75, 0.2);
      transform: translateY(-1px);
    }

    .cart-qty > span {
      min-width: 30px;
      text-align: center;
      color: var(--ink);
      font-weight: 700;
      font-size: 16px;
      line-height: 1;
      letter-spacing: 0.01em;
    }

    .cart-item-total {
      font-weight: 700;
      color: var(--ink);
      font-size: 14px;
      white-space: nowrap;
      justify-self: end;
      grid-column: 3;
      grid-row: 1 / span 2;
      align-self: center;
    }

    .cart-summary {
      display: grid;
      gap: 10px;
      padding: 14px 22px 18px;
      border-top: 1px solid rgba(28, 23, 20, 0.08);
      background: #fff;
    }

    .cart-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      color: #6f6464;
      font-size: 16px;
      font-weight: 600;
    }

    #cartToOrder {
      position: relative;
    }

    #cartToOrder.is-disabled {
      opacity: 0.55;
      cursor: not-allowed;
      pointer-events: auto;
      filter: saturate(0.75);
      box-shadow: none;
      transform: none;
    }

    #cartToOrder.is-disabled:hover {
      transform: none;
      box-shadow: none;
    }

    #cartToOrder.is-disabled::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 50%;
      bottom: calc(100% + 10px);
      transform: translate(-50%, 6px);
      opacity: 0;
      width: max-content;
      max-width: 280px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(43, 31, 26, 0.14);
      background: rgba(255, 255, 255, 0.98);
      color: var(--ink);
      font-size: 12px;
      font-weight: 500;
      line-height: 1.25;
      box-shadow: 0 10px 22px rgba(28, 23, 20, 0.16);
      pointer-events: none;
      z-index: 5;
      transition: opacity 0.18s ease, transform 0.18s ease;
      text-align: center;
      white-space: normal;
    }

    #cartToOrder.is-disabled:hover::after,
    #cartToOrder.is-disabled:focus-visible::after {
      opacity: 1;
      transform: translate(-50%, 0);
    }

    .cart-empty {
      text-align: center;
      color: #7d6f6f;
      padding: 24px 0;
    }

    .delivery {
      display: grid;
      gap: 18px;
    }

    #delivery .delivery {
      align-content: start;
    }

    #delivery .delivery-head {
      min-height: clamp(92px, 9vw, 128px);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    #delivery .delivery-head .section-title {
      margin-bottom: 0;
      align-items: flex-start;
      justify-content: flex-start;
      min-height: 100%;
    }

    #delivery .delivery-head .section-title > div {
      display: grid;
      gap: 8px;
      align-content: start;
    }

    #delivery .delivery-head .section-title h2 {
      line-height: 1.08;
      margin-top: 0;
    }

    #delivery .delivery-list {
      display: grid;
      gap: 18px;
      margin-top: 0;
    }

    #delivery .delivery-list .card {
      padding: 24px 28px;
    }

    .delivery .card {
      border: 1px solid rgba(28, 23, 20, 0.08);
    }

    .faq {
      display: grid;
      gap: 12px;
    }

    details {
      background: #fff;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 8px 20px rgba(28, 23, 20, 0.08);
      border: 1px solid rgba(28, 23, 20, 0.08);
      transition:
        transform 0.3s var(--ui-ease),
        box-shadow 0.3s var(--ui-ease),
        border-color 0.24s var(--ui-ease);
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      list-style: none;
      transition: color 0.2s var(--ui-ease);
    }

    summary::-webkit-details-marker {
      display: none;
    }

    .order {
      background: linear-gradient(120deg, #f9f0e5, #fff);
      border-radius: var(--radius-lg);
      padding: 32px;
      display: grid;
      gap: 12px;
      box-shadow: var(--shadow);
    }

    .order .section-title {
      margin-bottom: 6px;
      align-items: flex-start;
      justify-content: flex-start;
      gap: 28px;
    }

    .order-note {
      color: var(--muted);
      font-size: 16px;
      line-height: 1.3;
      font-weight: 500;
      max-width: 230px;
      margin-top: 14px;
    }

    .order form {
      min-width: 0;
      display: grid;
      gap: 16px;
    }

    .order form .hero-actions {
      margin-top: 14px;
      margin-bottom: 0;
      gap: 12px;
      align-items: center;
      display: grid;
      grid-template-columns: auto minmax(0, 1fr);
    }

    .order form .hero-actions .btn {
      flex: 0 0 auto;
    }

    .order-delivery-hint {
      color: var(--muted);
      font-size: 18px;
      line-height: 1.25;
      font-weight: 500;
      white-space: normal;
      min-width: 0;
    }

    .form-grid {
      display: grid;
      row-gap: 16px;
      column-gap: 16px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      min-width: 0;
    }

    label {
      display: grid;
      gap: 10px;
      font-size: 14px;
      color: var(--muted);
      min-width: 0;
    }

    input,
    textarea,
    select {
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(28, 23, 20, 0.18);
      font: inherit;
      background: #fff;
      width: 100%;
      min-width: 0;
      transition:
        border-color 0.22s var(--ui-ease),
        box-shadow 0.26s var(--ui-ease),
        background-color 0.22s var(--ui-ease),
        transform 0.22s var(--ui-ease);
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    .footer {
      padding: 60px 0 40px;
      border-top: 1px solid rgba(28, 23, 20, 0.08);
      background: #f6efe8;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 24px;
      margin-top: 22px;
    }

    .footer a {
      color: var(--muted);
    }

    .btn:focus-visible,
    .btn-link:focus-visible,
    .float-btn:focus-visible,
    .nav-links a:focus-visible,
    .catalog-float-menu a:focus-visible,
    .product-qty button:focus-visible,
    .cart-qty button:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible,
    summary:focus-visible {
      outline: none;
      box-shadow: var(--ui-ring), var(--ui-shadow-soft);
    }

    .nav-links a:hover,
    .nav-links a:focus-visible {
      color: var(--accent-3);
    }

    .nav-links a:hover::after,
    .nav-links a:focus-visible::after {
      transform: scaleX(1);
    }

    details[open] summary {
      color: var(--accent-3);
    }

    input:hover,
    textarea:hover,
    select:hover {
      border-color: rgba(200, 87, 45, 0.45);
      background: #fffdfb;
    }

    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible {
      border-color: rgba(200, 87, 45, 0.72);
      transform: translateY(-1px);
    }

    .product-qty button:hover,
    .cart-qty button:hover {
      box-shadow: 0 8px 16px rgba(28, 23, 20, 0.12);
    }

    @media (hover: hover) {
      .btn:hover,
      .btn-link:hover,
      .float-btn:hover {
        transform: translateY(-2px);
      }

      .catalog-card:hover,
      .product:hover,
      details:hover {
        transform: translateY(-4px);
        box-shadow: var(--ui-shadow-strong);
      }

      .product:hover {
        border-color: rgba(200, 87, 45, 0.22);
      }
    }

    [id] {
      scroll-margin-top: 16px;
    }

    @media (prefers-reduced-motion: reduce) {
      .btn,
      .btn-link,
      .catalog-card,
      .product,
      .float-btn,
      details,
      .product-qty button,
      .cart-qty button,
      .nav-links a,
      input,
      textarea,
      select {
        transition: none !important;
        transform: none !important;
      }
    }

    .ticker {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .review {
      background: #fff;
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 10px 24px rgba(28, 23, 20, 0.08);
    }

    .review strong {
      display: block;
      margin-bottom: 6px;
    }

    #reviews .section-title,
    #faq .section-title {
      margin-bottom: 12px;
      align-items: flex-start;
      justify-content: flex-start;
    }

    #reviews .grid {
      gap: 14px;
    }

    #reviews .review {
      padding: 22px 24px;
    }

    #faq .faq {
      gap: 10px;
    }

    #faq details {
      padding: 22px 24px;
    }

    #contact .order {
      padding: 28px 32px;
      gap: 14px;
    }

    #contact .section-title {
      display: grid;
      grid-template-columns: minmax(0, 1fr) auto;
      margin-bottom: 0;
      align-items: end;
      column-gap: 18px;
      row-gap: 0;
      justify-content: initial;
    }

    #contact .section-title > div {
      display: grid;
      gap: 0;
      min-width: 0;
    }

    #contact .section-title .eyebrow {
      margin-bottom: 4px;
    }

    #contact .section-title h2 {
      line-height: 1.06;
      max-width: 24ch;
    }

    #contact .section-title > .pill {
      margin-top: 0;
      align-self: end;
      justify-self: end;
    }

    #contact .ticker {
      gap: 10px 12px;
    }

    #contact .hero-actions {
      margin-top: 0;
      margin-bottom: 0;
      gap: 12px;
    }

    #faq.section,
    #reviews.section {
      padding-top: 56px;
      padding-bottom: 56px;
    }

    .flow-stage {
      --flow-stage-progress: 0;
      position: relative;
    }

    body.flow-motion-enabled .flow-reveal {
      --flow-reveal-y: 30px;
      --flow-reveal-scale: 0.955;
      --flow-stage-y: 0px;
      --flow-stage-scale: 1;
      --flow-delay: 0ms;
      opacity: 0;
      transform: translate3d(0, calc(var(--flow-reveal-y) + var(--flow-stage-y)), 0) scale(calc(var(--flow-reveal-scale) * var(--flow-stage-scale)));
      filter: blur(10px);
      transition:
        transform 0.86s cubic-bezier(0.22, 1, 0.36, 1),
        opacity 0.72s cubic-bezier(0.22, 1, 0.36, 1),
        filter 0.62s cubic-bezier(0.22, 1, 0.36, 1);
      transition-delay: var(--flow-delay);
      will-change: transform, opacity, filter;
    }

    body.flow-motion-enabled .flow-reveal.is-visible {
      opacity: 1;
      transform: translate3d(0, var(--flow-stage-y), 0) scale(var(--flow-stage-scale));
      filter: blur(0);
    }

    body.flow-motion-enabled.flow-primed:not(.has-scrolled-once) .flow-reveal[data-defer="1"] {
      opacity: 0;
      transform: translate3d(0, 34px, 0) scale(0.95);
      filter: blur(12px);
    }

    .delay-1 { --flow-delay: 0.08s; }
    .delay-2 { --flow-delay: 0.16s; }
    .delay-3 { --flow-delay: 0.24s; }
    .delay-4 { --flow-delay: 0.32s; }

    .hero.flow-stage[data-flow-pin] {
      min-height: clamp(106vh, 124vh, 146vh);
      padding-top: clamp(26px, 6vh, 72px);
      padding-bottom: clamp(34px, 12vh, 126px);
    }

    .hero.flow-stage[data-flow-pin] .hero-grid {
      position: sticky;
      top: clamp(74px, 10vh, 112px);
    }

    .hero.flow-stage[data-flow-pin] .hero-visual.flow-reveal {
      --flow-stage-y: calc((1 - var(--flow-stage-progress)) * 24px);
      --flow-stage-scale: calc(0.92 + var(--flow-stage-progress) * 0.08);
    }

    .hero.flow-stage[data-flow-pin] .hero-card.flow-reveal {
      --flow-stage-y: calc((1 - var(--flow-stage-progress)) * 14px);
      --flow-stage-scale: calc(0.962 + var(--flow-stage-progress) * 0.038);
    }

    .hero.flow-stage[data-flow-pin] h1.flow-reveal,
    .hero.flow-stage[data-flow-pin] p.flow-reveal,
    .hero.flow-stage[data-flow-pin] .hero-actions.flow-reveal {
      --flow-stage-y: calc((1 - var(--flow-stage-progress)) * 8px);
    }

    @media (max-width: 980px) {
      .hero.flow-stage[data-flow-pin] {
        min-height: auto;
        padding-top: 0;
        padding-bottom: 0;
      }

      .hero.flow-stage[data-flow-pin] .hero-grid {
        position: relative;
        top: auto;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      body.flow-motion-enabled .flow-reveal,
      body.flow-motion-enabled .flow-reveal.is-visible,
      .hero-showcase-image,
      .hero-showcase-caption {
        transition: none;
        transform: none;
        filter: none;
        opacity: 1;
        animation: none;
      }
    }


    /* Cart refresh: cleaner, modern look */
    .cart-drawer {
      background: #fff;
      border: 1px solid rgba(42, 34, 32, 0.08);
      box-shadow: 0 24px 60px rgba(42, 34, 32, 0.18);
    }

    .cart-header {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(250, 246, 243, 0.95) 100%);
      border-bottom: 1px solid rgba(42, 34, 32, 0.06);
    }

    .cart-item {
      background: #ffffff;
      border: 1px solid rgba(42, 34, 32, 0.08);
      box-shadow: 0 12px 24px rgba(42, 34, 32, 0.08);
    }

    .cart-item-name {
      color: #211a18;
      letter-spacing: -0.01em;
    }

    .cart-item-sub {
      color: #6c5f5c;
    }

    .cart-clear,
    .cart-close {
      background: #f1e7df;
    }

    @media (max-width: 1180px) {
      .nav {
        flex-wrap: wrap;
        align-items: center;
      }

      .nav-links {
        order: 3;
        width: 100%;
        justify-content: center;
      }

      .nav-cta {
        order: 2;
        margin-left: auto;
        justify-content: flex-end;
        flex-wrap: wrap;
      }
    }

    @media (max-width: 980px) {
      .hero-grid,
      .grid-3,
      .grid-2,
      .footer-grid,
      .form-grid {
        grid-template-columns: 1fr;
      }

      .nav {
        flex-direction: column;
        align-items: stretch;
        gap: 14px;
      }

      .nav-links {
        order: 2;
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: 14px 18px;
      }

      .nav-cta {
        order: 3;
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
      }

      .nav-cta .pill {
        flex: 1 1 100%;
        justify-content: center;
      }

      .nav-cta .btn {
        flex: 1 1 220px;
      }

      .hero-visual {
        min-height: 320px;
      }

      #delivery .delivery-head {
        min-height: auto;
      }

      #contact .section-title {
        grid-template-columns: 1fr;
        row-gap: 10px;
      }

      #contact .section-title > .pill {
        justify-self: start;
      }
    }

    @media (max-width: 640px) {
      .hero {
        padding: 48px 0 72px;
      }

      .section {
        padding: 60px 0;
      }

      .hero-card {
        padding: 20px;
      }

      .hero-card .stat {
        align-items: flex-start;
        gap: 10px;
      }

      .hero-visual {
        padding: 0;
      }

      .hero-showcase {
        height: 280px;
        border-radius: 18px;
      }

      .hero-showcase-kind {
        font-size: 10px;
      }

      .hero-showcase-name {
        font-size: 17px;
      }

      .hero-showcase-price {
        font-size: 12px;
      }

      .hero-showcase-note {
        font-size: 11px;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }

      .nav-links {
        gap: 10px 14px;
      }

      .nav-cta .btn {
        flex: 1 1 100%;
      }

      .float-btn,
      .catalog-float > .btn,
      .cart-float {
        width: auto;
      }

      .cart-float,
      .catalog-float {
        top: calc(env(safe-area-inset-top, 0px) + 10px);
        bottom: auto;
      }

      .cart-float {
        right: 12px;
      }

      .catalog-float {
        right: 112px;
      }

      .catalog-float-menu {
        top: 44px;
        bottom: auto;
      }

      .catalog-float::after {
        top: 38px;
        bottom: auto;
      }

      .cart-drawer {
        top: calc(env(safe-area-inset-top, 0px) + 8px);
        right: 8px;
        left: 8px;
        width: auto;
        height: calc(100dvh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px) - 16px);
        max-height: calc(100vh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px) - 16px);
        border-radius: 18px;
      }

      .cart-header {
        height: auto;
        min-height: 64px;
        padding: 12px 14px;
      }

      .cart-title {
        margin-left: 0;
        font-size: 34px;
        line-height: 1;
      }

      .cart-actions {
        position: static;
        margin-left: auto;
        gap: 8px;
      }

      .cart-clear {
        width: auto;
        min-width: 92px;
        padding: 0 14px;
        height: 34px;
        font-size: 15px;
      }

      .cart-close {
        width: 34px;
        height: 34px;
      }

      .cart-items {
        padding: 12px;
        gap: 10px;
      }

      .cart-item {
        width: 100%;
        min-width: 0;
        grid-template-columns: 56px minmax(0, 1fr);
        grid-template-rows: auto auto auto;
        row-gap: 8px;
        column-gap: 10px;
        padding: 10px 12px;
      }

      .cart-item img {
        width: 56px;
        height: 56px;
        grid-row: 1 / span 3;
      }

      .cart-item-info {
        grid-column: 2;
        grid-row: 1 / span 2;
      }

      .cart-item-sub {
        flex-wrap: wrap;
        gap: 8px;
      }

      .cart-item-total {
        grid-column: 2;
        grid-row: 3;
        justify-self: start;
      }

      .cart-summary {
        padding: 12px;
        gap: 8px;
      }

      .cart-row {
        font-size: 14px;
        align-items: flex-start;
      }

      .cart-row > :last-child {
        text-align: right;
      }

      .order form .hero-actions {
        grid-template-columns: 1fr;
      }

      .order form .hero-actions .btn {
        width: 100%;
      }

      .order-delivery-hint {
        white-space: normal;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="container nav">
        <div class="logo">
          <img src="assets/images/logo-figma.svg" alt="Уральские пельмешки">
        </div>
        <nav class="nav-links">
          <a href="pages/catalog.html">Каталог</a>
          <a href="#advantages">Почему мы</a>
          <a href="#delivery">Доставка</a>
          <a href="#reviews">Отзывы</a>
          <a href="#faq">FAQ</a>
        </nav>
        <div class="nav-cta">
          <span class="pill">Контакты по запросу</span>
          <button class="btn btn-ghost cart-button" type="button" id="cartOpen">
            <span class="cart-label">Корзина</span>
            <span class="cart-count" id="cartCount">0</span>
          </button>
          <a class="btn btn-primary" href="#order">Заказать</a>
        </div>
      </div>
      </header>

    <div class="catalog-float" id="catalogFloat" aria-label="Каталог">
      <button class="btn btn-ghost float-btn" type="button">Каталог</button>
      <div class="catalog-float-menu">
        <a class="btn-link" href="pages/catalog.html#catalog">Все категории</a>
        <a class="btn-link" href="pages/catalog.html#cat-pelmeni-hand">Пельмешки</a>
        <a class="btn-link" href="pages/catalog.html#cat-vareniki">Вареники</a>
        <a class="btn-link" href="pages/catalog.html#cat-manty">Манты</a>
        <a class="btn-link" href="pages/catalog.html#cat-blinchiki">Блинчики</a>
        <a class="btn-link" href="pages/catalog.html#cat-polufab">Полуфабрикаты</a>
        <a class="btn-link" href="pages/catalog.html#cat-auto">Автоматные</a>
      </div>
    </div>
    <button class="btn btn-ghost cart-button cart-float float-btn" type="button" id="cartFloat" aria-hidden="true">
      <span class="cart-icon" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M7 6h14l-1.4 7.1a2 2 0 0 1-2 1.6H10a2 2 0 0 1-2-1.6L6.3 4H3" stroke="currentColor" stroke-width="1.6" fill="none" stroke-linecap="round" stroke-linejoin="round"/><circle cx="10" cy="18" r="1.5" fill="currentColor"/><circle cx="17" cy="18" r="1.5" fill="currentColor"/></svg></span>
      <span class="cart-count cart-badge" id="cartCountFloat">0</span>
    </button>


    <section class="hero">
      <div class="container hero-grid">
        <div>
          <span class="tag">Ручная лепка</span>
          <h1 class="animate">Уральский вкус, который приезжает к вам домой</h1>
          <p class="animate delay-1">Пельмени, вареники, манты и домашние полуфабрикаты с натуральным составом. Мы лепим вручную, замораживаем шоковым способом и доставляем по Москве и области.</p>
          <div class="hero-actions animate delay-2">
            <a class="btn hero-cta" href="#order">Заказать с доставкой</a>
            <a class="btn hero-cta" href="pages/catalog.html">Смотреть каталог</a>
          </div>
          <div class="hero-card animate delay-3">
            <div class="stat">
              <strong>7 000 ₽</strong>
              <span>бесплатная доставка в Москве</span>
            </div>
            <div class="stat">
              <strong>3 000 ₽</strong>
              <span>минимальный заказ</span>
            </div>
            <div class="stat">
              <strong>СБП</strong>
              <span>безопасная оплата после подтверждения</span>
            </div>
          </div>
        </div>
        <div class="hero-visual animate delay-1">
          <figure class="hero-showcase">
            <img class="hero-showcase-image" id="heroShowcaseImage" src="https://optim.tildacdn.com/stor3863-3335-4863-a238-333038353538/-/format/webp/676b289183d23623e24ed10a05a7c8bf.jpg.webp" alt="Пельмени с говядиной и свининой" loading="eager" decoding="async" fetchpriority="high">
            <figcaption class="hero-showcase-caption">
              <span class="hero-showcase-kind" id="heroShowcaseKind">Пельмени</span>
              <strong class="hero-showcase-name" id="heroShowcaseName">Пельмени с говядиной и свининой</strong>
              <span class="hero-showcase-price" id="heroShowcasePrice">800 г • 1 300 ₽</span>
              <span class="hero-showcase-note" id="heroShowcaseNote">Ручная лепка • насыщенный вкус</span>
            </figcaption>
          </figure>
        </div>
      </div>
    </section>

    <section class="section" id="advantages">
      <div class="container grid grid-2">
        <div>
          <div class="section-title">
            <div>
              <div class="eyebrow">Почему мы</div>
              <h2>Собственное производство и честные рецепты</h2>
            </div>
          </div>
          <div class="highlights">
            <div class="item">
              <span class="dot"></span>
              <div>
                <strong>Собственное производство</strong>
                <p>Контролируем каждый этап от рецепта до упаковки.</p>
              </div>
            </div>
            <div class="item">
              <span class="dot"></span>
              <div>
                <strong>Ручная лепка</strong>
                <p>Никакой автоматизации: форма, тесто и начинка под нашим контролем.</p>
              </div>
            </div>
            <div class="item">
              <span class="dot"></span>
              <div>
                <strong>Урал как кухня</strong>
                <p>Настоящие рецепты, натуральный состав, без сои и усилителей.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="order" id="order">
          <div class="section-title">
            <div>
              <div class="eyebrow">Заказ</div>
              <h2>Оформить доставку</h2>
            </div>
            <span class="order-note">Ответим в течение дня</span>
          </div>
          <form>
            <div class="form-grid">
              <label>
                Ваше имя
                <input type="text" placeholder="Ирина" />
              </label>
              <label>
                Телефон
                <input type="tel" placeholder="Ваш номер телефона" />
              </label>
              <label>
                Дата доставки
                <input type="date" />
              </label>
              <label>
                Время
                <input type="text" placeholder="Например, 12:00-15:00" />
              </label>
            </div>
            <label>
              Адрес доставки
              <input type="text" placeholder="Москва, улица, дом" />
            </label>
            <label>
              Комментарий
              <textarea placeholder="Что важно учесть при сборке заказа"></textarea>
            </label>
            <div class="hero-actions">
              <button class="btn btn-primary" type="submit">Отправить заявку</button>
              <span class="order-delivery-hint" id="orderDeliveryHint">Стоимость доставки уточним при подтверждении</span>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section class="section" id="delivery">
      <div class="container grid grid-2">
        <div class="delivery">
          <div class="delivery-head">
            <div class="section-title">
              <div>
                <div class="eyebrow">Доставка</div>
                <h2>Привезем уральский вкус к вашей двери</h2>
              </div>
            </div>
          </div>
          <div class="delivery-list">
            <div class="card">
              <strong>Москва и Мытищи</strong>
              <p>В пределах МКАД и Мытищ доставка 600 ₽.</p>
            </div>
            <div class="card">
              <strong>Бесплатно от 7 000 ₽</strong>
              <p>При заказе от 7 000 ₽ доставка по Москве бесплатна.</p>
            </div>
            <div class="card">
              <strong>По области</strong>
              <p>Стоимость рассчитываем индивидуально по вашему адресу.</p>
            </div>
            <div class="card">
              <strong>Минимальный заказ</strong>
              <p>Сумма заказа от 3 000 ₽.</p>
            </div>
          </div>
        </div>
        <div class="delivery">
          <div class="delivery-head">
            <div class="section-title">
              <div>
                <div class="eyebrow">Оплата</div>
                <h2>Безопасно и удобно</h2>
              </div>
            </div>
          </div>
          <div class="delivery-list">
            <div class="card">
              <strong>После подтверждения</strong>
              <p>Оператор связывается с вами и уточняет детали заказа.</p>
            </div>
            <div class="card">
              <strong>Ссылка или QR-код</strong>
              <p>Мы отправим ссылку для оплаты онлайн банковской картой.</p>
            </div>
            <div class="card">
              <strong>СБП</strong>
              <p>Оплата через СБП быстро и безопасно.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="faq">
      <div class="container">
        <div class="section-title">
          <div>
            <div class="eyebrow">FAQ</div>
            <h2>Ответы на частые вопросы</h2>
          </div>
        </div>
        <div class="faq">
          <details open>
            <summary>Как быстро вы доставляете заказы?</summary>
            <p>Доставка по Москве и области в течение дня при заказе до 16:00. Точный интервал согласуем по телефону.</p>
          </details>
          <details>
            <summary>Как узнать стоимость доставки для моего адреса?</summary>
            <p>Точную стоимость озвучит оператор при подтверждении заказа.</p>
          </details>
          <details>
            <summary>Нужно ли размораживать продукцию?</summary>
            <p>Нет, полуфабрикаты не требуют разморозки. Следуйте инструкции на упаковке.</p>
          </details>
          <details>
            <summary>Есть ли продукция для детей?</summary>
            <p>Рекомендуем пельмени с индейкой, вареники с творогом и вишней, сырники и блинчики.</p>
          </details>
          <details>
            <summary>Используете ли вы сою или усилители?</summary>
            <p>Нет. Только натуральные ингредиенты: мясо, мука, яйца, лук, соль и специи.</p>
          </details>
        </div>
      </div>
    </section>

    <section class="section" id="reviews">
      <div class="container">
        <div class="section-title">
          <div>
            <div class="eyebrow">Отзывы</div>
            <h2>Нас выбирают семьи и рынки Москвы</h2>
          </div>
        </div>
        <div class="grid grid-3">
          <div class="review">
            <strong>Москва, Черемушкинский рынок</strong>
            <p>Пельмени всегда свежие, аккуратная лепка и стабильный вкус. Покупатели возвращаются за ними.</p>
          </div>
          <div class="review">
            <strong>Мытищи, ТК «ЭкоБазар»</strong>
            <p>Отличный ассортимент, нравится, что есть и вареники, и манты. Берем партиями.</p>
          </div>
          <div class="review">
            <strong>Частный покупатель</strong>
            <p>Удобная доставка, честный состав и вкус как дома. Особенно любим блинчики.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="contact">
      <div class="container">
        <div class="order">
          <div class="section-title">
            <div>
              <div class="eyebrow">Контакт</div>
              <h2>Свяжитесь с нами прямо сейчас</h2>
            </div>
            <span class="pill">Мы на связи каждый день</span>
          </div>
          <div class="ticker">
            <span class="pill">Телефон: Контакты по запросу</span>
            <span class="pill">Мессенджеры: по запросу</span>
            <span class="pill">Соцсети: временно не публикуем</span>
            <span class="pill">Доставка: Москва и область</span>
          </div>
          <div class="hero-actions">
            <a class="btn btn-primary" href="#order">Оформить заказ</a>
            <a class="btn btn-ghost" href="pages/catalog.html">Вернуться к каталогу</a>
          </div>
        </div>
      </div>
    </section>


    <div class="cart-overlay" id="cartOverlay"></div>
    <aside class="cart-drawer" id="cartDrawer" aria-labelledby="cartTitle" aria-hidden="true">
      <div class="cart-header">
        <h3 class="cart-title" id="cartTitle">Корзина</h3>
        <div class="cart-actions">
          <button class="cart-clear" type="button" id="cartClear">Очистить</button>
          <button class="cart-close" type="button" id="cartClose" aria-label="Закрыть">X</button>
        </div>
      </div>
      <div class="cart-items" id="cartItems"></div>
      <div class="cart-summary">
        <div class="cart-row">
          <span>Сумма</span>
          <strong id="cartSubtotal">0 ₽</strong>
        </div>
        <div class="cart-row">
          <span>Доставка</span>
          <span id="cartDelivery">Рассчитывается индивидуально</span>
        </div>
        <div class="cart-row">
          <span>Итого</span>
          <strong id="cartTotal">0 ₽</strong>
        </div>
        <a class="btn btn-primary" href="#order" id="cartToOrder">Перейти к оформлению</a>
      </div>
    </aside>

    <footer class="footer">
      <div class="container">
        <div class="logo">Уральские пельмешки</div>
        <div class="footer-grid">
          <div>
            <strong>Адреса продаж</strong>
            <p>Москва, Черемушкинский рынок</p>
            <p>Мытищи, ТК «ЭкоБазар»</p>
          </div>
          <div>
            <strong>Документы</strong>
            <p><a href="#">Политика конфиденциальности</a></p>
            <p><a href="#">Условия доставки</a></p>
            <p><a href="#">Условия оплаты</a></p>
          </div>
          <div>
            <strong>Реквизиты</strong>
            <p>ИП Сайкин Максим Борисович</p>
            <p>ОГРНИП: 323745600024581</p>
            <p>Доставка пельменей в Москве и области</p>
          </div>
        </div>
      </div>
    </footer>
  <script>
    const formatPrice = (value) => new Intl.NumberFormat("ru-RU").format(value) + " ₽";
    const formatPriceShort = (value) => new Intl.NumberFormat("ru-RU").format(value).replace(/\s/g, ".") + "р";
    const getScrollY = () => window.scrollY || window.pageYOffset || document.documentElement.scrollTop || 0;
    const setInstantScrollMode = (enabled) => {
      document.documentElement.classList.toggle("no-smooth-scroll", Boolean(enabled));
    };
    const jumpToY = (y) => {
      setInstantScrollMode(true);
      window.scrollTo({ top: Math.max(0, Math.round(y)), left: 0, behavior: "auto" });
      requestAnimationFrame(() => setInstantScrollMode(false));
    };
    const ANCHOR_OFFSETS = {
      "#advantages": { desktop: 14, mobile: 10 },
      "#delivery": { desktop: 14, mobile: 10 },
      "#reviews": { desktop: 14, mobile: 10 },
      "#faq": { desktop: 14, mobile: 10 },
      "#order": { desktop: 14, mobile: 10 }
    };
    const getAnchorTopOffset = (hash = "") => {
      const preset = ANCHOR_OFFSETS[hash];
      if (!preset) return window.innerWidth <= 640 ? 10 : 14;
      return window.innerWidth <= 640 ? preset.mobile : preset.desktop;
    };
    const resolveAnchorNode = (hash) => {
      if (!hash) return null;
      try {
        const node = document.querySelector(hash);
        if (!node) return null;
        if (node.classList && node.classList.contains("section")) {
          return node.querySelector(".section-title") || node;
        }
        return node;
      } catch (error) {
        return null;
      }
    };
    const getFixedAnchorY = (hash) => {
      const node = resolveAnchorNode(hash);
      if (!node) return null;
      return Math.max(0, getScrollY() + node.getBoundingClientRect().top - getAnchorTopOffset(hash));
    };
    let smoothHashRaf = 0;
    let smoothHashToken = 0;
    const stopSmoothHashScroll = () => {
      smoothHashToken += 1;
      if (smoothHashRaf) window.cancelAnimationFrame(smoothHashRaf);
      smoothHashRaf = 0;
      setInstantScrollMode(false);
    };
    const jumpToHash = (hash) => {
      const targetY = getFixedAnchorY(hash);
      if (targetY === null || Number.isNaN(targetY)) return false;
      jumpToY(targetY);
      return true;
    };
    const smoothScrollToHash = (hash) => {
      const startTarget = getFixedAnchorY(hash);
      if (startTarget === null || Number.isNaN(startTarget)) return false;
      stopSmoothHashScroll();
      setInstantScrollMode(true);
      const token = smoothHashToken;
      const startTime = performance.now();
      const startY = getScrollY();
      const initialDistance = Math.abs(startTarget - startY);
      const minDuration = Math.max(300, Math.min(560, initialDistance * 0.45));
      const maxDuration = Math.max(900, Math.min(1500, initialDistance * 1.15 + 420));

      const frame = (now) => {
        if (token !== smoothHashToken) return;
        const elapsed = now - startTime;
        const targetY = getFixedAnchorY(hash);
        if (targetY === null || Number.isNaN(targetY)) {
          smoothHashRaf = 0;
          setInstantScrollMode(false);
          return;
        }
        const currentY = getScrollY();
        const delta = targetY - currentY;
        if (elapsed >= minDuration && Math.abs(delta) <= 0.8) {
          smoothHashRaf = 0;
          setInstantScrollMode(false);
          return;
        }
        if (elapsed >= maxDuration) {
          smoothHashRaf = 0;
          setInstantScrollMode(false);
          return;
        }
        const blend = elapsed < minDuration ? 0.22 : 0.3;
        window.scrollTo({ top: currentY + delta * blend, left: 0, behavior: "auto" });
        smoothHashRaf = window.requestAnimationFrame(frame);
      };
      smoothHashRaf = window.requestAnimationFrame(frame);
      return true;
    };
    const scrollToHash = (hash, behavior = "smooth") => (
      behavior === "smooth" ? smoothScrollToHash(hash) : jumpToHash(hash)
    );
    const alignCurrentHash = () => {
      if (!window.location.hash) return;
      jumpToHash(window.location.hash);
    };

    if ("scrollRestoration" in history) {
      history.scrollRestoration = "manual";
    }
    const navEntry = performance.getEntriesByType("navigation")[0];
    const navType = navEntry ? navEntry.type : "navigate";
    if (navType === "reload") {
      if (window.location.hash) {
        history.replaceState(null, "", `${window.location.pathname}${window.location.search}`);
      }
      jumpToY(0);
    }
    window.addEventListener("load", alignCurrentHash, { once: true });
    window.addEventListener("resize", alignCurrentHash, { passive: true });
    window.addEventListener("wheel", stopSmoothHashScroll, { passive: true });
    window.addEventListener("touchstart", stopSmoothHashScroll, { passive: true });
    window.addEventListener("mousedown", stopSmoothHashScroll, { passive: true });
    window.addEventListener("keydown", stopSmoothHashScroll);

    const cartKey = "uralpelmeshki_cart";
    const cartMetaKey = "uralpelmeshki_cart_meta";
    const cart = JSON.parse(localStorage.getItem(cartKey) || "{}");
    const cartMeta = JSON.parse(localStorage.getItem(cartMetaKey) || "{}");

    const productNodes = Array.from(document.querySelectorAll('.product[data-id]'));
    const productFallback = {
      "pelmeni-beef-pork": { id: "pelmeni-beef-pork", name: "Пельмени с говядиной и свининой", price: 1300, image: "https://optim.tildacdn.com/stor3863-3335-4863-a238-333038353538/-/format/webp/676b289183d23623e24ed10a05a7c8bf.jpg.webp" },
      "pelmeni-elite": { id: "pelmeni-elite", name: "Пельмени «Элита» (говядина)", price: 1400, image: "https://optim.tildacdn.com/stor3530-3237-4336-b632-303761323261/-/format/webp/ca3c3b07b310273651ac496dcc36e70f.jpg.webp" },
      "pelmeni-beef-turkey": { id: "pelmeni-beef-turkey", name: "Пельмени с говядиной и индейкой", price: 1350, image: "https://optim.tildacdn.com/stor6363-3832-4664-b933-393062343236/-/format/webp/9ab189ab8271ec509aa51c0f6c333edd.jpg.webp" },
      "pelmeni-sitnye": { id: "pelmeni-sitnye", name: "Пельмени «Сытные» (говядина, свинина, сало)", price: 1250, image: "https://optim.tildacdn.com/stor3336-3336-4233-b364-366132616432/-/format/webp/15a68b9eb64aa505b14e83bb45104d44.jpg.webp" },
      "pelmeni-zakus": { id: "pelmeni-zakus", name: "Пельмени «Закусочные» (говядина, свинина, курица)", price: 1100, image: "https://optim.tildacdn.com/stor6632-6264-4063-b639-333731663637/-/format/webp/5c3e5002a7d7d2a522f4078756c6edeb.jpg.webp" },
      "pelmeni-semeinye": { id: "pelmeni-semeinye", name: "Пельмени «Семейные» (говядина и курица)", price: 1300, image: "https://optim.tildacdn.com/stor3863-3464-4235-a335-653164383538/-/format/webp/ddb9303483ec6c69ee212bcf131a94ce.jpg.webp" },
      "pelmeni-kolibri": { id: "pelmeni-kolibri", name: "Пельмени «Колибри»", price: 1600, image: "https://optim.tildacdn.com/stor3661-6365-4262-a136-656437633833/-/format/webp/7ead4509f23448325f7757c753501716.jpg.webp" },
      "vareniki-potato-onion": { id: "vareniki-potato-onion", name: "Вареники с картофелем и луком", price: 750, image: "https://optim.tildacdn.com/stor6138-3331-4132-b261-373966306462/-/format/webp/5cc0cb7de2bd17d282d22a85af9daa91.jpg.webp" },
      "vareniki-potato-mushrooms": { id: "vareniki-potato-mushrooms", name: "Вареники с картофелем и грибами", price: 570, image: "https://optim.tildacdn.com/stor6561-6264-4536-a436-303938393936/-/format/webp/5f0083652e11117103d7f29d2df54d2e.jpg.webp" },
      "vareniki-raw-potato-bacon": { id: "vareniki-raw-potato-bacon", name: "Вареники с сырым картофелем, луком и салом", price: 800, image: "https://optim.tildacdn.com/stor3231-6631-4631-b165-343135396566/-/format/webp/b986c4de6115139235f9d3a7a0d57d81.jpg.webp" },
      "vareniki-sauerkraut": { id: "vareniki-sauerkraut", name: "Вареники с квашеной капустой", price: 900, image: "https://optim.tildacdn.com/stor3132-6231-4438-a235-663466303439/-/format/webp/2a634f69148f2de090a9ff1d89d3284e.jpg.webp" },
      "vareniki-adyghe": { id: "vareniki-adyghe", name: "Вареники с адыгейским сыром", price: 900, image: "https://optim.tildacdn.com/stor3030-3862-4137-a337-633231653066/-/format/webp/39b4077f1c2d2c0ff878e2c1d00e911f.jpg.webp" },
      "vareniki-sweet-curd": { id: "vareniki-sweet-curd", name: "Вареники с творогом (сладкие)", price: 970, image: "https://optim.tildacdn.com/stor3063-3134-4637-b966-646530633435/-/format/webp/e2b36ff7ba7ac1ae4d845cbb10177d38.jpg.webp" },
      "vareniki-cherry": { id: "vareniki-cherry", name: "Вареники с вишней", price: 1350, image: "https://optim.tildacdn.com/stor6361-3262-4134-a233-626666343864/-/format/webp/bbb4ad03bc96fc1897c51c5b84ef26ec.jpg.webp" }
    };
    const productGalleryExtras = {
      "pelmeni-beef-pork": ["https://optim.tildacdn.com/stor6166-3931-4137-a438-623235633839/-/format/webp/14e1bd7977e680e1ecd66526bf440154.jpg.webp"],
      "pelmeni-elite": ["https://optim.tildacdn.com/stor3861-3037-4633-a333-343435313332/-/format/webp/cef9173dd5519f13ddca8937fa54247a.jpg.webp"],
      "pelmeni-beef-turkey": ["https://optim.tildacdn.com/stor3732-3531-4764-b039-343166323332/-/format/webp/bffb20544bbfdf2f1ab44b1aeef49965.jpg.webp"],
      "pelmeni-sitnye": ["https://optim.tildacdn.com/stor3837-3436-4264-b163-346131363632/-/format/webp/139e64c3d79060da56b7b6b2ffa903f5.jpg.webp"],
      "vareniki-potato-onion": ["https://optim.tildacdn.com/stor6130-3562-4336-b935-373163353937/-/format/webp/109d1f0d9b71cdd291f225cc5ed14f36.jpg.webp"],
      "vareniki-potato-mushrooms": ["https://optim.tildacdn.com/stor3438-3364-4336-b531-633463646233/-/format/webp/18405fcb7121e2c540b2872668ac9bb7.jpg.webp"],
      "vareniki-raw-potato-bacon": ["https://optim.tildacdn.com/stor6431-3962-4662-b934-656237353530/-/format/webp/f21be791de02882b29918362254652e5.jpg.webp"],
      "vareniki-sauerkraut": ["https://optim.tildacdn.com/stor6432-3434-4465-a334-353065376366/-/format/webp/19e86160818b361810b30d3f00f1d4b9.jpg.webp"],
      "vareniki-adyghe": ["https://optim.tildacdn.com/stor3931-6462-4235-a164-346432633835/-/format/webp/f73bf8e5f3c85ea6efd187646c774415.jpg.webp"],
      "vareniki-sweet-curd": ["https://optim.tildacdn.com/stor3738-3864-4931-b630-366562366365/-/format/webp/178b1ac6f52c0184e62004b069d94c50.jpg.webp"]
    };
    const productImageFocus = {
      "pelmeni-beef-pork": ["50% 48%", "50% 52%"],
      "pelmeni-elite": ["50% 46%", "50% 50%"],
      "pelmeni-beef-turkey": ["50% 47%", "50% 50%"],
      "pelmeni-sitnye": ["50% 48%", "50% 50%"],
      "vareniki-potato-onion": ["50% 48%", "50% 50%"],
      "vareniki-potato-mushrooms": ["50% 48%", "50% 50%"],
      "vareniki-raw-potato-bacon": ["50% 48%", "50% 50%"],
      "vareniki-sauerkraut": ["50% 48%", "50% 50%"],
      "vareniki-adyghe": ["50% 48%", "50% 50%"],
      "vareniki-sweet-curd": ["50% 48%", "50% 50%"],
      "vareniki-cherry": ["50% 50%"]
    };

    const heroShowcaseImage = document.getElementById("heroShowcaseImage");
    const heroShowcaseKind = document.getElementById("heroShowcaseKind");
    const heroShowcaseName = document.getElementById("heroShowcaseName");
    const heroShowcasePrice = document.getElementById("heroShowcasePrice");
    const heroShowcaseNote = document.getElementById("heroShowcaseNote");

    const heroShowcaseNotes = {
      pelmeni: [
        "Ручная лепка • насыщенный вкус",
        "Тонкое тесто • сочная начинка",
        "Классика уральской кухни"
      ],
      vareniki: [
        "Домашние рецепты • мягкое тесто",
        "Нежная текстура • яркие начинки",
        "От сытных до сладких вкусов"
      ]
    };

    const heroShowcaseItems = Object.keys(productFallback)
      .filter((id) => id.startsWith("pelmeni-") || id.startsWith("vareniki-"))
      .flatMap((id) => {
        const item = productFallback[id];
        if (!item || !item.image) return [];
        const kind = id.startsWith("pelmeni-") ? "Пельмени" : "Вареники";
        const focusPoints = productImageFocus[id] || ["50% 48%"];
        const imageSet = [...new Set([item.image, ...(productGalleryExtras[id] || [])].filter(Boolean))];
        return imageSet.map((src, index) => ({
          id,
          kind,
          name: item.name,
          price: item.price,
          weight: "800 г",
          image: src,
          objectPosition: focusPoints[index] || focusPoints[0] || "50% 48%"
        }));
      });

    const shuffle = (arr) => {
      for (let i = arr.length - 1; i > 0; i -= 1) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    };

    const initHeroShowcase = () => {
      if (!heroShowcaseImage || !heroShowcaseKind || !heroShowcaseName || !heroShowcasePrice || !heroShowcaseItems.length) {
        return;
      }

      let current = -1;
      let queue = [];
      let timer = null;
      let lastNote = "";

      const refillQueue = () => {
        queue = shuffle(Array.from({ length: heroShowcaseItems.length }, (_, i) => i));
      };

      const pickNote = (kind) => {
        const pool = kind === "Пельмени" ? heroShowcaseNotes.pelmeni : heroShowcaseNotes.vareniki;
        if (!pool || !pool.length) return "";
        let note = pool[Math.floor(Math.random() * pool.length)];
        if (pool.length > 1 && note === lastNote) {
          note = pool[(pool.indexOf(note) + 1) % pool.length];
        }
        lastNote = note;
        return note;
      };

      const renderItem = (nextIndex) => {
        const next = heroShowcaseItems[nextIndex];
        if (!next) return;

        heroShowcaseImage.classList.add("is-fading");
        const caption = heroShowcaseImage.closest(".hero-showcase")?.querySelector(".hero-showcase-caption");
        if (caption) caption.classList.add("is-updating");

        const preload = new Image();
        preload.decoding = "async";
        preload.src = next.image;

        const apply = () => {
          heroShowcaseImage.src = next.image;
          heroShowcaseImage.alt = next.name;
          heroShowcaseImage.style.objectPosition = next.objectPosition;
          heroShowcaseKind.textContent = next.kind;
          heroShowcaseName.textContent = next.name;
          heroShowcasePrice.textContent = `${next.weight} • ${formatPrice(next.price)}`;
          if (heroShowcaseNote) {
            heroShowcaseNote.textContent = pickNote(next.kind);
          }
          requestAnimationFrame(() => {
            heroShowcaseImage.classList.remove("is-fading");
            if (caption) caption.classList.remove("is-updating");
          });
        };

        if (preload.complete) {
          apply();
        } else {
          preload.onload = apply;
          preload.onerror = apply;
        }
      };

      const showNext = () => {
        if (!queue.length) refillQueue();
        let nextIndex = queue.pop();
        if (heroShowcaseItems.length > 1 && nextIndex === current) {
          if (!queue.length) refillQueue();
          nextIndex = queue.pop();
        }
        current = nextIndex;
        renderItem(nextIndex);
      };

      const start = () => {
        if (timer) return;
        timer = window.setInterval(showNext, 3400);
      };

      const stop = () => {
        if (!timer) return;
        window.clearInterval(timer);
        timer = null;
      };

      showNext();
      start();
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) stop();
        else start();
      });
    };

    initHeroShowcase();

    const initFlowScrollExperience = () => {
      const stages = Array.from(document.querySelectorAll(".hero, .section, .footer"));
      if (!stages.length) return;

      document.body.classList.add("flow-motion-enabled", "flow-primed");

      const reducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const itemSeen = new Set();
      const revealItems = [];
      const delayByGroup = new Map();
      const pinStages = [];

      const addRevealItem = (node, defer) => {
        if (!node || itemSeen.has(node)) return;
        itemSeen.add(node);
        node.classList.add("flow-reveal");
        if (defer) node.dataset.defer = "1";

        if (!node.classList.contains("delay-1")
          && !node.classList.contains("delay-2")
          && !node.classList.contains("delay-3")
          && !node.classList.contains("delay-4")) {
          const group = node.closest(".grid, .delivery-list, .faq, .footer-grid, .hero-actions, .highlights, form") || node.parentElement;
          const order = delayByGroup.get(group) || 0;
          node.style.setProperty("--flow-delay", `${Math.min(order, 6) * 70}ms`);
          delayByGroup.set(group, order + 1);
        }

        revealItems.push(node);
      };

      stages.forEach((stage, stageIndex) => {
        stage.classList.add("flow-stage");
        const defer = stageIndex > 0;

        if (stage.classList.contains("hero")) {
          stage.setAttribute("data-flow-pin", "1");
          pinStages.push(stage);
          stage.querySelectorAll(".tag, h1, p, .hero-actions, .hero-card, .hero-visual").forEach((node) => addRevealItem(node, false));
          return;
        }

        stage.querySelectorAll(".section-title, .highlights .item, .card, .faq details, .review, .ticker, .order form > label, .order form .hero-actions, .footer-grid > div").forEach((node) => addRevealItem(node, defer));
      });

      const markFirstScroll = () => {
        if (document.body.classList.contains("has-scrolled-once")) return;
        document.body.classList.add("has-scrolled-once");
      };

      const syncFirstScrollState = () => {
        if ((window.scrollY || window.pageYOffset || 0) > 0) {
          markFirstScroll();
        }
      };

      syncFirstScrollState();
      window.addEventListener("scroll", syncFirstScrollState, { passive: true });

      if (reducedMotion || !("IntersectionObserver" in window)) {
        markFirstScroll();
        revealItems.forEach((node) => node.classList.add("is-visible"));
      } else {
        const revealObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;
            entry.target.classList.add("is-visible");
            observer.unobserve(entry.target);
          });
        }, { threshold: 0.16, rootMargin: "0px 0px -8% 0px" });

        revealItems.forEach((node) => revealObserver.observe(node));

        requestAnimationFrame(() => {
          revealItems.forEach((node) => {
            const rect = node.getBoundingClientRect();
            if (rect.top < window.innerHeight * 0.92) {
              node.classList.add("is-visible");
              revealObserver.unobserve(node);
            }
          });
        });
      }

      if (reducedMotion || !pinStages.length) return;

      let rafId = 0;
      const updatePinProgress = () => {
        rafId = 0;
        const viewportHeight = window.innerHeight || 1;
        pinStages.forEach((stage) => {
          const rect = stage.getBoundingClientRect();
          const start = viewportHeight * 0.88;
          const end = -Math.min(rect.height * 0.42, viewportHeight * 0.72);
          const raw = (start - rect.top) / (start - end);
          const progress = Math.max(0, Math.min(1, raw));
          stage.style.setProperty("--flow-stage-progress", progress.toFixed(4));
        });
      };

      const requestPinProgress = () => {
        if (rafId) return;
        rafId = window.requestAnimationFrame(updatePinProgress);
      };

      requestPinProgress();
      window.addEventListener("scroll", requestPinProgress, { passive: true });
      window.addEventListener("resize", requestPinProgress, { passive: true });
      document.addEventListener("visibilitychange", () => {
        if (!document.hidden) requestPinProgress();
      });
    };

    initFlowScrollExperience();

    const normalizeImageUrl = (url) => url;

    const parseInlineBackground = (value) => {
      const match = value && value.match(/url\((['"]?)(.*?)\1\)/);
      return match ? match[2] : "";
    };

    const buildProductGallery = (card) => {
      const thumb = card.querySelector(".thumb");
      if (!thumb) return;

      const id = card.dataset.id;
      const focusPoints = productImageFocus[id] || ["50% 48%"];
      const inlineBg = parseInlineBackground(thumb.style.backgroundImage || "");
      const images = [...new Set(
        [card.dataset.image, inlineBg, ...(productGalleryExtras[id] || [])]
          .filter(Boolean)
          .map(normalizeImageUrl)
      )];
      if (!images.length) return;

      card.dataset.image = images[0];
      thumb.style.backgroundImage = "none";
      thumb.textContent = "";

      const track = document.createElement("div");
      track.className = "thumb-track";
      thumb.appendChild(track);

      const slides = images.map((src, index) => {
        const img = document.createElement("img");
        img.className = "thumb-slide";
        if (index === 0) img.classList.add("active");
        img.src = src;
        img.style.objectPosition = focusPoints[index] || focusPoints[0] || "50% 48%";
        img.alt = card.querySelector("h3")?.textContent?.trim() || "Фото товара";
        track.appendChild(img);
        return img;
      });

      if (images.length === 1) return;

      const overlay = document.createElement("div");
      overlay.className = "thumb-overlay";
      thumb.appendChild(overlay);

      const dots = document.createElement("div");
      dots.className = "thumb-dots";
      const dotButtons = images.map((_, index) => {
        const dot = document.createElement("button");
        dot.className = "thumb-dot";
        dot.type = "button";
        dot.setAttribute("aria-label", `Фото ${index + 1}`);
        if (index === 0) dot.classList.add("active");
        dot.addEventListener("click", (event) => {
          event.stopPropagation();
          setIndex(index);
        });
        dots.appendChild(dot);
        return dot;
      });
      thumb.appendChild(dots);

      let current = 0;

      const setIndex = (index) => {
        current = (index + slides.length) % slides.length;
        slides.forEach((slide, i) => slide.classList.toggle("active", i === current));
        dotButtons.forEach((dot, i) => dot.classList.toggle("active", i === current));
      };

      thumb.addEventListener("mousemove", (event) => {
        const rect = thumb.getBoundingClientRect();
        if (!rect.width) return;
        const ratio = (event.clientX - rect.left) / rect.width;
        const next = Math.max(0, Math.min(slides.length - 1, Math.floor(ratio * slides.length)));
        if (next !== current) setIndex(next);
      });
    };

    productNodes.forEach(buildProductGallery);

    const products = {
      ...cartMeta,
      ...productFallback,
      ...Object.fromEntries(
        productNodes.map((el) => [
          el.dataset.id,
          {
            id: el.dataset.id,
            name: el.querySelector('h3')?.textContent?.trim() || 'Товар',
            price: Number(el.dataset.price || 0),
            image: el.dataset.image || ''
          }
        ])
      )
    };

    const cartCount = document.getElementById("cartCount");
    const cartItems = document.getElementById("cartItems");
    const cartSubtotal = document.getElementById("cartSubtotal");
    const cartTotal = document.getElementById("cartTotal");
    const cartOverlay = document.getElementById("cartOverlay");
    const cartDrawer = document.getElementById("cartDrawer");
    const cartClear = document.getElementById("cartClear");
    const cartDelivery = document.getElementById("cartDelivery");
    const cartToOrder = document.getElementById("cartToOrder");
    const orderDeliveryHint = document.getElementById("orderDeliveryHint");

    const MIN_ORDER_SUM = 3000;
    const FREE_DELIVERY_SUM = 7000;
    const MIN_ORDER_TOOLTIP = `Минимальная сумма заказа для доставки ${formatPrice(MIN_ORDER_SUM)}.`;

    const setCheckoutState = (subtotal) => {
      const enabled = subtotal >= MIN_ORDER_SUM;
      cartToOrder.classList.toggle("is-disabled", !enabled);
      cartToOrder.setAttribute("aria-disabled", String(!enabled));
      cartToOrder.tabIndex = enabled ? 0 : -1;
      if (enabled) {
        cartToOrder.removeAttribute("data-tooltip");
      } else {
        cartToOrder.setAttribute("data-tooltip", MIN_ORDER_TOOLTIP);
      }
    };

    const updateCartSummaryStatus = (subtotal) => {
      if (subtotal >= FREE_DELIVERY_SUM) {
        cartDelivery.textContent = "Бесплатная доставка";
        if (orderDeliveryHint) orderDeliveryHint.textContent = "Бесплатная доставка";
      } else {
        cartDelivery.textContent = "Рассчитывается индивидуально";
        if (orderDeliveryHint) orderDeliveryHint.textContent = "Стоимость доставки уточним при подтверждении";
      }
      setCheckoutState(subtotal);
    };

    cartToOrder.addEventListener("click", (event) => {
      if (cartToOrder.classList.contains("is-disabled")) {
        event.preventDefault();
      }
    });

    let lockedScrollY = 0;

    const lockPageScroll = () => {
      if (document.body.classList.contains("cart-open")) return;
      lockedScrollY = Math.round(getScrollY());
      document.body.style.top = `-${lockedScrollY}px`;
      document.body.classList.add("cart-open");
    };

    const unlockPageScroll = () => {
      if (!document.body.classList.contains("cart-open")) return;
      document.body.classList.remove("cart-open");
      document.body.style.top = "";
      jumpToY(lockedScrollY || 0);
    };

    const openCart = () => {
      lockPageScroll();
      cartOverlay.classList.add("open");
      cartDrawer.classList.add("open");
      cartDrawer.setAttribute("aria-hidden", "false");
      setFloatHidden(true);
    };

    const closeCart = () => {
      cartOverlay.classList.remove("open");
      cartDrawer.classList.remove("open");
      cartDrawer.setAttribute("aria-hidden", "true");
      unlockPageScroll();
      setFloatHidden(false);
      updateFloatVisibility();
    };

    document.getElementById("cartOpen").addEventListener("click", openCart);
    document.getElementById("cartClose").addEventListener("click", closeCart);
    cartOverlay.addEventListener("click", closeCart);

    const saveCart = () => localStorage.setItem(cartKey, JSON.stringify(cart));
    const saveCartMeta = () => localStorage.setItem(cartMetaKey, JSON.stringify(cartMeta));

    if (cartClear) {
      cartClear.addEventListener("click", () => {
        Object.keys(cart).forEach((key) => delete cart[key]);
        saveCart();
        renderCart();
      });
    }

    const addToCart = (id) => {
      cart[id] = (cart[id] || 0) + 1;
      if (products[id]) {
        cartMeta[id] = products[id];
        saveCartMeta();
      }
      saveCart();
      renderCart();
    };

    const updateQty = (id, delta) => {
      cart[id] = (cart[id] || 0) + delta;
      if (cart[id] <= 0) delete cart[id];
      saveCart();
      renderCart();
    };

    const updateAddControls = () => {
      document.querySelectorAll(".product[data-id]").forEach((card) => {
        const id = card.dataset.id;
        const qty = cart[id] || 0;
        const actions = card.querySelector(".hero-actions");
        if (!actions) return;
        const hadQty = actions.querySelector(".product-qty") !== null;
        actions.innerHTML = "";
        if (qty > 0) {
          actions.innerHTML = `
            <div class="product-qty" aria-label="Количество в корзине">
              <button type="button" data-add-dec="${id}"><span class="qty-icon" aria-hidden="true"><svg viewBox="0 0 12 12" focusable="false" aria-hidden="true"><path d="M2 6h8" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/></svg></span></button>
              <span>${qty}</span>
              <button type="button" data-add-inc="${id}"><span class="qty-icon" aria-hidden="true"><svg viewBox="0 0 12 12" focusable="false" aria-hidden="true"><path d="M2 6h8M6 2v8" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/></svg></span></button>
            </div>
          `;
          if (!hadQty) {
            const el = actions.querySelector(".product-qty");
            if (el) requestAnimationFrame(() => el.classList.add("appear"));
          }
        } else {
          actions.innerHTML = `<button class="btn btn-primary" type="button" data-add="${id}">В корзину</button>`;
          if (hadQty) {
            const el = actions.querySelector(".btn-primary");
            if (el) requestAnimationFrame(() => el.classList.add("appear"));
          }
        }
      });
    };

    const renderCart = () => {
      const entries = Object.entries(cart);
      const totalItems = entries.reduce((sum, [, qty]) => sum + qty, 0);
      cartCount.textContent = totalItems;
      syncCounts();

      if (!entries.length) {
        cartItems.innerHTML = '<div class="cart-empty">Корзина пока пуста. Добавьте любимые позиции.</div>';
        cartSubtotal.textContent = formatPrice(0);
        cartTotal.textContent = formatPrice(0);
        updateCartSummaryStatus(0);
        updateAddControls();
        return;
      }

      let subtotal = 0;
      cartItems.innerHTML = entries.map(([id, qty]) => {
        const product = products[id] || cartMeta[id];
        if (!product) return "";
        cartMeta[id] = product;
        const line = product.price * qty;
        subtotal += line;
        const safeImage = product.image || "data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Crect width='100%25' height='100%25' fill='%23f5e4d5'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Georgia' font-size='18' fill='%23806b5f'%3EUP%3C/text%3E%3C/svg%3E";
        return `
          <div class="cart-item">
            <img src="${safeImage}" alt="${product.name}">
            <div class="cart-item-info">
              <div class="cart-item-name">${product.name}</div>
              <div class="cart-item-sub">
                <span class="price">${formatPriceShort(product.price)}</span>
                <div class="cart-qty" aria-label="Количество товара в корзине">
                  <button type="button" data-dec="${id}" aria-label="Уменьшить количество"><span class="qty-icon" aria-hidden="true"><svg viewBox="0 0 12 12" focusable="false" aria-hidden="true"><path d="M2 6h8" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/></svg></span></button>
                  <span>${qty}</span>
                  <button type="button" data-inc="${id}" aria-label="Увеличить количество"><span class="qty-icon" aria-hidden="true"><svg viewBox="0 0 12 12" focusable="false" aria-hidden="true"><path d="M2 6h8M6 2v8" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/></svg></span></button>
                </div>
              </div>
            </div>
            <div class="cart-item-total">${formatPriceShort(line)}</div>
          </div>
        `;
      }).join("");

      cartSubtotal.textContent = formatPrice(subtotal);
      cartTotal.textContent = formatPrice(subtotal);
      saveCartMeta();
      updateCartSummaryStatus(subtotal);

      cartItems.querySelectorAll("[data-inc]").forEach((btn) => {
        btn.addEventListener("click", () => updateQty(btn.dataset.inc, 1));
      });
      cartItems.querySelectorAll("[data-dec]").forEach((btn) => {
        btn.addEventListener("click", () => updateQty(btn.dataset.dec, -1));
      });

      updateAddControls();
    };


    const cartButton = document.getElementById("cartOpen");
    const cartFloat = document.getElementById("cartFloat");
    const cartCountFloat = document.getElementById("cartCountFloat");

    const syncCounts = () => {
      cartCountFloat.textContent = cartCount.textContent;
    };


    const catalogFloat = document.getElementById("catalogFloat");
    const catalogToggle = catalogFloat ? catalogFloat.querySelector(".float-btn") : null;
    const catalogLinks = catalogFloat ? Array.from(catalogFloat.querySelectorAll(".catalog-float-menu a[href]")) : [];
    let catalogMenuClosingTimer = 0;

    const suppressCatalogHover = () => {
      if (!catalogFloat) return;
      catalogFloat.classList.add("menu-closing");
      if (catalogMenuClosingTimer) window.clearTimeout(catalogMenuClosingTimer);
      catalogMenuClosingTimer = window.setTimeout(() => {
        catalogFloat.classList.remove("menu-closing");
      }, 260);
    };

    const closeCatalogMenu = (forceHide = false) => {
      if (!catalogFloat) return;
      catalogFloat.classList.remove("menu-open");
      if (forceHide) suppressCatalogHover();
    };

    const navigateWithMotion = (href) => {
      if (!href) return;
      const url = new URL(href, window.location.href);
      const isSameDocument = url.origin === window.location.origin
        && url.pathname === window.location.pathname;
      if (isSameDocument && url.hash) {
        if (scrollToHash(url.hash, "smooth")) {
          if (window.location.hash !== url.hash) {
            history.pushState(null, "", url.hash);
          }
          return;
        }
      }
      window.location.href = href;
    };

    const updateFloatVisibility = () => {
      const header = document.querySelector("header");
      const threshold = header ? header.offsetHeight : 120;
      if (window.scrollY > threshold) {
        cartFloat.classList.add("show");
        if (catalogFloat) catalogFloat.classList.add("show");
      } else {
        cartFloat.classList.remove("show");
        if (catalogFloat) catalogFloat.classList.remove("show");
        closeCatalogMenu();
      }
    };


    const setFloatHidden = (hidden) => {
      if (hidden) {
        cartFloat.classList.add("hidden");
        if (catalogFloat) catalogFloat.classList.add("hidden");
        closeCatalogMenu();
      } else {
        cartFloat.classList.remove("hidden");
        if (catalogFloat) catalogFloat.classList.remove("hidden");
      }
    };
    updateFloatVisibility();
    window.addEventListener("scroll", () => {
      updateFloatVisibility();
    }, { passive: true });
    window.addEventListener("resize", updateFloatVisibility);

    cartFloat.addEventListener("click", () => {
      openCart();
    });

    if (catalogToggle) {
      catalogToggle.addEventListener("click", (event) => {
        event.preventDefault();
        event.stopPropagation();
        catalogFloat.classList.remove("menu-closing");
        catalogFloat.classList.toggle("menu-open");
      });
    }

    if (catalogFloat) {
      catalogFloat.addEventListener("mouseenter", () => {
        if (catalogMenuClosingTimer) window.clearTimeout(catalogMenuClosingTimer);
        catalogFloat.classList.remove("menu-closing");
      });
    }

    catalogLinks.forEach((link) => {
      link.addEventListener("click", (event) => {
        const href = link.getAttribute("href");
        if (!href) return;
        event.preventDefault();
        event.stopPropagation();
        closeCatalogMenu(true);
        window.setTimeout(() => {
          navigateWithMotion(href);
        }, 80);
      });
    });

    document.addEventListener("click", (event) => {
      if (event.defaultPrevented) return;
      const anchor = event.target.closest("a[href]");
      if (!anchor) return;
      const href = anchor.getAttribute("href");
      if (!href || href === "#" || href.startsWith("mailto:") || href.startsWith("tel:")) return;
      const url = new URL(href, window.location.href);
      const isSameDocument = url.origin === window.location.origin
        && url.pathname === window.location.pathname
        && Boolean(url.hash);
      if (!isSameDocument) return;
      event.preventDefault();
      closeCatalogMenu();
      navigateWithMotion(href);
    });

    document.addEventListener("click", (event) => {
      if (!catalogFloat) return;
      if (catalogFloat.contains(event.target)) return;
      closeCatalogMenu();
    });

    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape") closeCatalogMenu();
    });

    document.addEventListener("click", (event) => {
      const addBtn = event.target.closest("[data-add]");
      if (addBtn) {
        addToCart(addBtn.dataset.add);
        return;
      }
      const incBtn = event.target.closest("[data-add-inc]");
      if (incBtn) {
        updateQty(incBtn.dataset.addInc, 1);
        return;
      }
      const decBtn = event.target.closest("[data-add-dec]");
      if (decBtn) {
        updateQty(decBtn.dataset.addDec, -1);
      }
    });

    renderCart();
  </script>
</div>
</body>
</html>
